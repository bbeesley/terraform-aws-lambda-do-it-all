version: 2.1
workflows:
  check:
    jobs:
      - validate:
          name: validate
          filters:
            tags:
              ignore: /.*/
jobs:
  validate:
    docker:
      - image: hashicorp/terraform:light
    working_directory: ~/repo
    steps:
      - checkout
      - run:
          name: Add Provider
          command: |
            echo 'provider "aws" {
              region = "eu-central-1"
            }
            ' > provider.tf
      - run:
          name: terraform init
          command: terraform init
      - run:
          name: terraform validate
          command: terraform validate
